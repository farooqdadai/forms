<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>HVAC Quiz ‚Äì Local Availability</title>
  <style>
    :root{
      --bg:#f8fafc;        /* slate-50 */
      --card:#ffffff;      /* white */
      --muted:#475569;     /* slate-600 */
      --text:#0f172a;      /* slate-900 */
      --accent:#22c55e;    /* green-500 */
      --accent-2:#3b82f6;  /* blue-500 */
      --danger:#dc2626;    /* red-600 */
      --shadow:0 6px 24px rgba(0,0,0,.08);
      --radius:20px;
    }
    *{box-sizing:border-box}
    html,body{height:100%}
    body{
      margin:0;
      font-family:system-ui,-apple-system,Segoe UI,Roboto,Ubuntu,Cantarell,'Helvetica Neue',Arial;
      color:var(--text);
      background:var(--bg);
      -webkit-font-smoothing:antialiased;
      line-height:1.5;
    }
    .container{
      max-width:960px;
      margin:0 auto;
      padding:24px;
      display:grid;
      place-items:center;
      min-height:100dvh;
    }
    .card{
      width:100%;
      background:var(--card);
      border:3px solid #e2e8f0;
      box-shadow:var(--shadow);
      border-radius:var(--radius);
      overflow:hidden;
    }
    header{
      padding:22px 22px 0;
    }
    .brand{
      display:flex;align-items:center;gap:12px;margin-bottom:8px;
      font-weight:700;letter-spacing:.2px
    }
    .brand .dot{width:12px;height:12px;border-radius:50%;background:var(--accent)}
    .sub{color:var(--muted);font-size:14px}

    .hero{
      padding:18px 22px 8px;
    }
    .progress{height:6px;background:#e2e8f0;border-radius:999px;overflow:hidden}
    .progress > span{display:block;height:100%;background:skyblue;width:0%}

    main{padding:26px;display:grid;gap:22px}

    h1{margin:0;font-size:28px;letter-spacing:.2px}
    p.lead{margin:4px 0 0;color:var(--muted)}

    .row{display:grid;gap:14px}

    .zip-wrap{display:flex;gap:12px}
    input[type="text"], .btn{
      font:inherit;border-radius:14px;border:1px solid #cbd5e1;
      padding:14px 16px;background:#fff;color:var(--text);
    }
    input[type="text"]{flex:1;outline:none}
    input[type="text"]::placeholder{color:#94a3b8}

    .btn{cursor:pointer;display:inline-flex;align-items:center;justify-content:center;gap:10px;
      font-weight:600;transition:transform .06s ease, box-shadow .2s ease, background .2s ease;
    }
    .btn.primary{background:linear-gradient(180deg,var(--accent),#16a34a);border:0;color:#fff}
    .btn.call{background:linear-gradient(180deg,#34d399,#10b981);border:0;color:#fff}
    .btn.secondary{background:#f1f5f9}
    .btn:active{transform:translateY(1px)}

    .grid{display:grid;grid-template-columns:repeat(2,minmax(0,1fr));gap:12px}
    @media (max-width:640px){.grid{grid-template-columns:1fr}}

    .option{
      border:3px solid #e2e8f0;border-radius:10px;padding:16px;cursor:pointer;
      background:#f8fafc;display:flex;align-items:center;gap:12px;transition:background .2s,border-color .2s,transform .06s;
    }
    .option:hover{border-color:#cbd5e1}
    .option .icon{font-size:22px}
    .option .heading-label {font-size: 18px;}
    .option.selected{outline:2px solid var(--accent);background:linear-gradient(180deg,rgba(34,197,94,.15),rgba(34,197,94,.05))}

    .meta{font-size:13px;color:var(--muted)}

    .hidden{display:none !important}

    .loading{
      display:grid;place-items:center;gap:18px;padding:30px 10px 8px
    }
    .spinner{width:42px;height:42px;border-radius:50%;border:4px solid #e2e8f0;border-top-color:var(--accent);animation:spin 1s linear infinite}
    @keyframes spin{to{transform:rotate(360deg)}}

    .loading-list{color:var(--muted);font-size:14px}
    .loading-list li{list-style:none;margin:6px 0;opacity:.4;transition:opacity .2s}
    .loading-list li.active{opacity:1}

    .badges{display:flex;flex-wrap:wrap;gap:8px;margin-top:6px}
    .badge{font-size:12px;color:#fff;background:var(--accent);padding:6px 10px;border-radius:999px;font-weight:700}

    .trust{display:flex;gap:12px;flex-wrap:wrap;color:var(--muted);font-size:13px}

    .notice{font-size:13px;color:var(--muted)}

    footer{padding:0 26px 26px;color:var(--muted);font-size:12px}
    footer a{color:inherit}

    .error{color:var(--danger);font-size:13px}
  </style>
</head>
<body>
  <body>
  <div class="container">
    <div class="card" role="region" aria-labelledby="title">
      <header>
        <div class="brand"><span class="dot" aria-hidden="true"></span>HVAC Local Finder</div>
        <div class="sub">Licensed ¬∑ Insured ¬∑ Same-Day Service Available</div>
      </header>

      <div class="hero" aria-hidden="true">
        <div class="progress" aria-label="Progress">
          <span id="progressBar" style="width: 0%"></span>
        </div>
      </div>

      <main>
        <!-- STEP 1: ZIP CODE -->
        <section id="step1" class="row" aria-live="polite">
          <h1 id="title">What‚Äôs your ZIP code?</h1>
          <p class="lead">Enter your ZIP code to check technician availability near you.</p>
          <div class="zip-wrap">
            <input id="zip" type="text" inputmode="numeric" autocomplete="postal-code" placeholder="e.g., 75001" aria-label="ZIP code" aria-describedby="zipHelp" maxlength="10" />
            <button class="btn primary" id="btnZip">Check My Area</button>
          </div>
          <div class="meta" id="zipHelp">We‚Äôll use this to match you with local pros.</div>
          <div class="error" id="zipError" role="alert" aria-live="assertive" hidden>Please enter a valid ZIP/postal code.</div>
        </section>

        <!-- STEP 2: SERVICE TYPE -->
        <section id="step2" class="row hidden" aria-live="polite">
          <h1>What type of service do you need today?</h1>
          <div class="grid" id="serviceOptions" role="group" aria-label="Select a service type">
            <!-- Options injected by JS for easy editing -->
          </div>
          <button class="btn secondary" id="btnService" disabled>Find Technicians</button>
          <div class="notice">This helps us match you with the right technician.</div>
        </section>

        <!-- STEP 2.5: LOADING -->
        <section id="stepLoading" class="loading hidden" aria-live="polite">
          <div class="spinner" aria-hidden="true"></div>
          <h2 style="margin:0">Checking availability in your area‚Ä¶</h2>
          <ul class="loading-list" id="loadingList" aria-label="Status updates">
            <li class="active">Finding licensed technicians near you‚Ä¶</li>
            <li>Checking for same-day availability‚Ä¶</li>
            <li>Securing your FREE estimate‚Ä¶</li>
          </ul>
        </section>

        <!-- STEP 3: RESULT / BRIDGE -->
        <section id="step3" class="row hidden" aria-live="polite">
          <h1>Great news! We have HVAC technicians in <span id="cityText">your area</span> ready to help.</h1>
          <p class="lead">You selected: <strong id="serviceText">AC Repair</strong>. Call now to get a FREE estimate and same-day service availability.</p>
          <div class="badges" aria-hidden="true">
            <span class="badge">No Obligation</span>
            <span class="badge">Local Experts</span>
            <span class="badge">Fast Response</span>
          </div>
          <div class="row">
            <a class="btn call" id="callBtn" href="tel:+1-555-555-1212" aria-label="Call now for your free estimate">
              üìû Call Now for Your FREE Estimate
            </a>
            <div class="trust">‚òÖ‚òÖ‚òÖ‚òÖ‚òÖ ‚ÄúFixed our AC the same day ‚Äî highly recommend!‚Äù ¬∑ Google Reviews ¬∑ BBB A+</div>
          </div>
          <div class="meta">Prefer text? <a id="smsLink" href="sms:+1-555-555-1212">Tap to text us</a>.</div>
        </section>
      </main>

      <footer>
        <div>¬© <span id="year"></span> HVAC Local Finder ¬∑ <a href="#" aria-disabled="true">Privacy</a> ¬∑ <a href="#" aria-disabled="true">Terms</a></div>
      </footer>
    </div>
  </div>

  <script>
    // ======== CONFIG (edit these) ========
    const BUSINESS_PHONE = "+1-555-555-1212";   // Update to your real tracking number
    const BUSINESS_SMS    = "+1-555-555-1212";   // Optional: SMS number (same as phone is fine)
    const POSTAL_PATTERN  = /^[A-Za-z0-9][A-Za-z0-9 \-]{2,9}$/; // Flexible US/CA/UK-style validation

    // ======== Elements ========
    const progressBar = document.getElementById('progressBar');
    const step1 = document.getElementById('step1');
    const step2 = document.getElementById('step2');
    const stepLoading = document.getElementById('stepLoading');
    const step3 = document.getElementById('step3');

    const zipInput = document.getElementById('zip');
    const zipBtn = document.getElementById('btnZip');
    const zipError = document.getElementById('zipError');

    const serviceOptions = document.getElementById('serviceOptions');
    const serviceBtn = document.getElementById('btnService');

    const cityText = document.getElementById('cityText');
    const serviceText = document.getElementById('serviceText');
    const callBtn = document.getElementById('callBtn');
    const smsLink = document.getElementById('smsLink');

    document.getElementById('year').textContent = new Date().getFullYear();

    // Initialize call/sms links
    function updateContactLinks(num){
      callBtn.href = `tel:${num}`;
      smsLink.href = `sms:${BUSINESS_SMS}`;
    }
    updateContactLinks(BUSINESS_PHONE);

    // Progress helper
    function setProgress(p){
      progressBar.style.width = `${p}%`;
    }

    // STEP 1 validate & continue
    function isValidPostal(v){
      return POSTAL_PATTERN.test(String(v).trim());
    }

    function goStep2(){
      step1.classList.add('hidden');
      step2.classList.remove('hidden');
      setProgress(50);
      serviceOptions.querySelector('[data-value]')?.focus();
    }

    zipBtn.addEventListener('click', () => {
      const val = zipInput.value;
      if(!isValidPostal(val)){
        zipError.hidden = false;
        zipInput.setAttribute('aria-invalid','true');
        zipInput.focus();
        return;
      }
      zipError.hidden = true;
      zipInput.removeAttribute('aria-invalid');
      goStep2();
    });

    zipInput.addEventListener('keydown', (e)=>{
      if(e.key==='Enter') zipBtn.click();
    });

    // STEP 2 options
    const options = [
      { label: 'Heating Installation', icon: 'üî•' },
      { label: 'Heating Repair',       icon: 'üõ†Ô∏è' },
      { label: 'AC Installation',      icon: '‚ùÑÔ∏è' },
      { label: 'AC Repair',            icon: '‚ö°' },
      { label: 'Other',                icon: 'üß∞' },
    ];

    let selectedService = null;

    function renderOptions(){
      serviceOptions.innerHTML = '';
      options.forEach((opt, i)=>{
        const btn = document.createElement('button');
        btn.className = 'option';
        btn.setAttribute('type','button');
        btn.setAttribute('data-value', opt.label);
        btn.setAttribute('aria-pressed','false');
        btn.innerHTML = `<span class="heading-label">${opt.label}</span>`;
        btn.addEventListener('click', ()=>{
          selectedService = opt.label;
          [...serviceOptions.children].forEach(c=>{c.classList.remove('selected'); c.setAttribute('aria-pressed','false');});
          btn.classList.add('selected');
          btn.setAttribute('aria-pressed','true');
          serviceBtn.disabled = false;
        });
        serviceOptions.appendChild(btn);
      });
    }
    renderOptions();

    serviceBtn.addEventListener('click', ()=>{
      if(!selectedService) return;
      step2.classList.add('hidden');
      stepLoading.classList.remove('hidden');
      setProgress(70);

      // Fake georesolution from ZIP (non-PII, just for copy). In production, replace with a real lookup.
      const zipVal = zipInput.value.trim();
      let pseudoCity = 'your area';
      if(/^[0-9]{5}$/.test(zipVal)){
        // simple mapping for demo
        const map = { '75001':'Addison, TX', '60601':'Chicago, IL', '10001':'New York, NY', '90001':'Los Angeles, CA' };
        pseudoCity = map[zipVal] || 'your area';
      }

      // Loading list tick-through
      const items = Array.from(document.querySelectorAll('#loadingList li'));
      let idx = 0;
      const tick = setInterval(()=>{
        if(idx>0) items[idx-1].classList.remove('active');
        if(idx<items.length){ items[idx].classList.add('active'); }
        idx++;
        if(idx>items.length){ clearInterval(tick); }
      }, 850);

      // After short delay, show results
      setTimeout(()=>{
        stepLoading.classList.add('hidden');
        step3.classList.remove('hidden');
        serviceText.textContent = selectedService;
        cityText.textContent = pseudoCity;
        setProgress(100);

        // Optional: light haptic on mobile
        if('vibrate' in navigator){ try{ navigator.vibrate(12); }catch(e){} }

        // Basic analytics events (push to dataLayer if present)
        window.dataLayer = window.dataLayer || [];
        window.dataLayer.push({
          event: 'quiz_complete',
          service: selectedService,
          postal: zipVal
        });
      }, 2600); // ~2.6s total suspense
    });

    // Accessibility: focus management
    function focusFirstVisible(){
      const visible = [step1,step2,stepLoading,step3].find(s=>!s.classList.contains('hidden'));
      const f = visible.querySelector('input,button,[tabindex]');
      if(f) f.focus();
    }
    window.addEventListener('load', ()=>{
      setProgress(25);
      focusFirstVisible();
    });

    // Deep-link helpers to prefill phone number via query (?phone=...)
    (function applyQueryParams(){
      const params = new URLSearchParams(location.search);
      const phone = params.get('phone');
      if(phone){ updateContactLinks(phone); }
    })();
  </script>
</body>
</body>
</html>
